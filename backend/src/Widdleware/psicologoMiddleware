const User = require('../Models/UserModel')

async function isPsicologo(req, res, next) {
    const { user_id } = req.params
    const { auth } = req.headers

    try {
        const user = await User.findById(user_id)
        if(!user) return res.status(400).send({ message: "Usuario nao encotrado"})

        if(user.role !== 'psicologo') return res.statu(400).send({ menssage: 'Acesso negado'})

        next()
    }
    catch(err){
        return res.status(400).send(err)
    }
}

module.exports = { isPsicologo }